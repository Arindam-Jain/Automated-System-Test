const cds = global.cds || require('@sap/cds/lib')

const { any } = cds.builtin.classes
cds.extend(any).with(require('./common/aspects/any'))

Object.defineProperty(cds, '_xrefs', {
  configurable: true,
  get: () => {
    // REVISIT: proxies || xrefs should be sufficient with @sap/cds^4.5
    return cds.env.effective.odata.proxies || cds.env.effective.odata.xrefs || cds.env.effective.cdsc.odataXServiceRefs
  }
})

module.exports = cds
